!function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],d=0,m=[];d<s.length;d++)i=s[d],r[i]&&m.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={3:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([58,1,0]),n()}({58:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(18),a=n(11),i=n(13),s=n(7),c=n(14),l=n(49);const u=!1;var d,m,h,k=n(15),p=n(54),f=n.n(p),O=n(2);!function(e){e.NotYet="not_yet",e.Syncing="syncing",e.Done="done"}(d||(d={})),function(e){e.Unread="unread",e.Reading="reading",e.Archived="archived",e.Deleted="deleted"}(m||(m={})),function(e){e.New="new",e.Reading="reading",e.Archived="archived",e.All="all"}(h||(h={}));var y;!function(e){e.AddedAt="addedAt",e.ArchivedAt="archivedAt"}(y||(y={}));const b=e=>`statusFilter=${e.statusFilter}&sortKey=${e.sortKey}`,v=e=>{e.startsWith("?")&&(e=e.substr(1));let t=h.New,n=y.AddedAt;return e.split("&").forEach(e=>{const[o,r]=e.split("=");switch(o){case"statusFilter":let e=_(h,r);null!=e&&(t=e);case"sortKey":let a=_(y,r);null!=a&&(n=a)}}),{statusFilter:t,sortKey:n}},_=(e,t)=>{return g(e).find(e=>e===t)||null},g=e=>Object.keys(e).map(t=>e[t]),A=()=>({syncStatus:d.Done}),E=e=>({shownIds:[],byId:e||{},nowLoading:!1}),B=({cdtn:e,queryState:t}={cdtn:(()=>({statusFilter:h.New,sortKey:y.AddedAt}))(),queryState:{count:0,allFetched:!1}})=>{const n=b(e);return{condition:e,currentQuery:n,stateByQuery:{[n]:t},panelCollapsible:!0}},R=()=>({err:null});function S(e=A(),t){switch(t.type){case"LOAD_MORE_BOOKMARKS_OK":return t.syncStatus!==e.syncStatus?Object.assign({},e,{syncStatus:t.syncStatus}):e}return e}const w=(e,t,n)=>{const o=e[t],r=n(o);return o===r?e:Object.assign({},e,{[t]:r})};function j(e=E(),t){switch(t.type){case"SYNC_BOOKMARKS_START":case"LOAD_MORE_BOOKMARKS_START":return Object.assign({},e,{nowLoading:!0});case"SYNC_BOOKMARKS_OK":return Object.assign({},e,{shownIds:[],byId:t.bookmarks,nowLoading:!1});case"LOAD_MORE_BOOKMARKS_OK":{const n=0===Object.keys(t.bookmarks).length;return Object.assign({},e,{byId:n?e.byId:Object.assign({},e.byId,t.bookmarks),nowLoading:!1})}case"UPDATE_SHOWN_BOOKMARKS":return Object.assign({},e,{shownIds:t.ids});case"OPEN_BOOKMARK":return Object.assign({},e,{byId:w(e.byId,t.id,K(m.Reading))});case"RESET_OPEN_BOOKMARK":return Object.assign({},e,{byId:w(e.byId,t.id,K(m.Unread))});case"FAVORITE_BOOKMARK_START":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{favorite:!0}))});case"FAVORITE_BOOKMARK_ERR":case"UNFAVORITE_BOOKMARK_START":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{favorite:!1}))});case"UNFAVORITE_BOOKMARK_ERR":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{favorite:!0}))});case"ARCHIVE_BOOKMARK_START":case"READD_BOOKMARK_ERR":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{status:m.Archived}))});case"ARCHIVE_BOOKMARK_OK":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{archivedAt:t.archivedAt}))});case"ARCHIVE_BOOKMARK_ERR":case"DELETE_BOOKMARK_ERR":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{status:t.prevStatus}))});case"READD_BOOKMARK_START":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{status:m.Unread}))});case"DELETE_BOOKMARK_START":return Object.assign({},e,{byId:w(e.byId,t.id,e=>Object.assign({},e,{status:m.Deleted}))});default:return e}}const K=e=>t=>t.status===e?t:Object.assign({},t,{status:e});function C(e=B(),t){switch(t.type){case"SEARCH":return Object.assign({},e,{condition:t.condition,currentQuery:t.query});case"SYNC_BOOKMARKS_OK":return Object.assign({},e,{stateByQuery:{}});case"LOAD_MORE_BOOKMARKS_OK":return Object.assign({},e,{stateByQuery:w(e.stateByQuery,e.currentQuery,e=>({count:(e?e.count:0)+Object.keys(t.bookmarks).length,allFetched:t.isLast&&t.syncStatus===d.Done}))});case"TOGGLE_SEARCH_PANEL_COLLAPSIBILITY":return Object.assign({},e,{panelCollapsible:t.enabled});default:return e}}function T(e=R(),t){switch(t.type){case"CATCH_ERR":return Object.assign({},e,{err:t.caught});default:return e}}const I=e=>Object(k.c)({router:Object(i.connectRouter)(e),user:S,bookmarks:j,search:C,errors:T});const M=e=>{let t,n=!1;return()=>(n||(t=e(),n=!0),t)};var L=n(53),N=n.n(L),P=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};const x=e=>N.a.create(e);class D{constructor(e,t,n,o={}){this.data=e,this.status=t,this.statusText=n,this.headers=o,this.isSuccess=200<=t&&t<300}toString(){const e="string"==typeof this.data?this.data:JSON.stringify(this.data);return`${this.status} ${this.statusText}: ${e}`}}function F(e){return new D(e.data,e.status,e.statusText,e.headers)}var $=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};const U=M(()=>{const e=function(){const e=document.querySelector('meta[name="csrf-token"]');return null==e?null:e.getAttribute("content")}();if(null==e)throw new Error("CSRF token not found");return e}),H=M((e=U())=>(function(e,t=x){const n=t(e);return function(e,t){return P(this,void 0,void 0,function*(){try{return F(yield n(e,t))}catch(e){if(null!=e.response)return F(e.response);throw e}})}})({baseURL:"/api/",headers:{"X-CSRF-Token":e}}));function Q(e,t=null,n=H()){return $(this,void 0,void 0,function*(){let o=e;null!=t&&(o=Object.assign({},o,{offset:t}));const r=yield n("/bookmarks/search",{params:o});if(!r.isSuccess)throw new Error(`failed to search bookmarks: ${r}`);return r.data})}const V=((e,t)=>{let n={},o=n,r=null;return a=>{const i=e(a);return(o===n||Object.keys(i).some(e=>i[e]!==o[e]))&&(r=t(a,i),o=i),r}})(({bookmarks:e})=>({ids:e.shownIds}),({bookmarks:e},{ids:t})=>t.map(t=>e.byId[t])),Y=({bookmarks:e})=>e.byId,q=({bookmarks:e},t)=>e.byId[t],G=e=>e.search.condition,W=({search:e})=>e.stateByQuery[e.currentQuery],z=({search:e})=>e.panelCollapsible;var J=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};function X(e,t={openBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/open`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to mark bookmark ${e} as opened: ${n}`);return{}})}}){return Object(O.thunkAs)(X.name,(n,o)=>J(this,void 0,void 0,function*(){yield t.openBookmark(e),n({type:"OPEN_BOOKMARK",id:e})}))}function Z(e,t={resetOpenBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/reset_open`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to reset bookmark ${e} open: ${n}`);return{}})}}){return Object(O.thunkAs)(Z.name,(n,o)=>J(this,void 0,void 0,function*(){yield t.resetOpenBookmark(e),n({type:"RESET_OPEN_BOOKMARK",id:e})}))}function ee(e,t={getBookmark:q,favoriteBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/favorite`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to favorite bookmark ${e}: ${n}`);return n.data})}}){return Object(O.thunkAs)(ee.name,(n,o)=>J(this,void 0,void 0,function*(){const r=t.getBookmark(o(),e);null==r||r.favorite||(n({type:"FAVORITE_BOOKMARK_START",id:e}),yield t.favoriteBookmark(e).catch(t=>{n({type:"FAVORITE_BOOKMARK_ERR",id:e,err:t})}))}))}function te(e,t={getBookmark:q,unfavoriteBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/unfavorite`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to unfavorite bookmark ${e}: ${n}`);return{}})}}){return Object(O.thunkAs)(te.name,(n,o)=>J(this,void 0,void 0,function*(){const r=t.getBookmark(o(),e);null!=r&&r.favorite&&(n({type:"UNFAVORITE_BOOKMARK_START",id:e}),yield t.unfavoriteBookmark(e).catch(t=>{n({type:"UNFAVORITE_BOOKMARK_ERR",id:e,err:t})}))}))}function ne(e,t={getBookmark:q,archiveBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/archive`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to archive bookmark ${e}: ${n}`);return n.data})}}){return Object(O.thunkAs)(ne.name,(n,o)=>J(this,void 0,void 0,function*(){const r=t.getBookmark(o(),e);if(null==r||r.status===m.Archived)return;const a=r.status;n({type:"ARCHIVE_BOOKMARK_START",id:e});const i=yield t.archiveBookmark(e).catch(t=>{n({type:"ARCHIVE_BOOKMARK_ERR",id:e,err:t,prevStatus:a})});null!=i&&n({type:"ARCHIVE_BOOKMARK_OK",id:e,archivedAt:i.archivedAt})}))}function oe(e,t={getBookmark:q,readdBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/readd`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to readd bookmark ${e}: ${n}`);return{}})}}){return Object(O.thunkAs)(oe.name,(n,o)=>J(this,void 0,void 0,function*(){const r=t.getBookmark(o(),e);null!=r&&r.status===m.Archived&&(n({type:"READD_BOOKMARK_START",id:e}),yield t.readdBookmark(e).catch(t=>{n({type:"READD_BOOKMARK_ERR",id:e,err:t})}))}))}function re(e,t={getBookmark:q,deleteBookmark:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t(`/bookmarks/${e}/delete`,{method:"put"});if(!n.isSuccess)throw new Error(`failed to delete bookmark ${e}: ${n}`);return{}})}}){return Object(O.thunkAs)(re.name,(n,o)=>J(this,void 0,void 0,function*(){const r=t.getBookmark(o(),e);if(null==r||r.status===m.Deleted)return;const a=r.status;n({type:"DELETE_BOOKMARK_START",id:e}),yield t.deleteBookmark(e).catch(t=>{n({type:"DELETE_BOOKMARK_ERR",id:e,err:t,prevStatus:a})})}))}class ae{constructor(e){this.src=e}[Symbol.iterator](){return this.src[Symbol.iterator]()}map(e){return new ae(function*(e,t){for(let n of t)yield e(n)}(e,this.src))}filter(e){return new ae(function*(e,t){for(let n of t)e(n)&&(yield n)}(e,this.src))}take(e){return new ae(function*(e,t){let n=0;for(let o of t){if(n===e)break;n+=1,yield o}}(e,this.src))}use(e){return e(this)}tap(e){return e(this)}collect(){const e=[];for(let t of this.src)e.push(t);return e}}const ie=(e,t,n=null)=>{const o=(e=>{switch(e){case h.New:return[m.Unread,m.Reading];case h.Reading:return[m.Reading];case h.Archived:return[m.Archived];case h.All:return[m.Unread,m.Reading,m.Archived]}})(t.statusFilter),r=(se=Object.keys(e),new ae(se)).map(t=>e[t]).use(ce(o)).collect(),a=le(r,o);return(n?a.slice(0,n):a).map(e=>e.id)};var se;const ce=e=>{const t=new Set(e);return e=>e.filter(e=>t.has(e.status))},le=(e,t)=>1===t.length&&t[0]===m.Archived?e.sort((e,t)=>(t.archivedAt||0)-(e.archivedAt||0)):e.sort((e,t)=>t.addedAt-e.addedAt);var ue=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};function de(){return Object(O.thunkAs)(de.name,(e,t)=>ue(this,void 0,void 0,function*(){e(me())}))}function me(e={getBookmarksById:Y,getSearchCondition:G,getCurrentQueryState:W,selectShownIds:ie}){return Object(O.thunkAs)(me.name,(t,n)=>ue(this,void 0,void 0,function*(){const o=n(),r=e.getBookmarksById(o),a=e.getSearchCondition(o),i=e.getCurrentQueryState(o),s=e.selectShownIds(r,a,i?i.count:null);t({type:"UPDATE_SHOWN_BOOKMARKS",ids:s})}))}function he(e={hasDesiredCount:!1},t={getCurrentQueryState:W,getSearchCondition:G,search:Q}){return Object(O.thunkAs)(he.name,(n,o)=>ue(this,void 0,void 0,function*(){const r=o(),a=t.getCurrentQueryState(r);if(null!=a&&a.allFetched)return;if(e.hasDesiredCount&&null!=a)return;n({type:"LOAD_MORE_BOOKMARKS_START"});const i=null==a?null:a.count,s=yield t.search(t.getSearchCondition(r),i);n({type:"LOAD_MORE_BOOKMARKS_OK",bookmarks:s.bookmarks,isLast:s.isLast,syncStatus:s.syncStatus})}))}var ke=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};function pe(e={getSearchCondition:G,synchronize:function(e,t=H()){return $(this,void 0,void 0,function*(){const n=yield t("/bookmarks/sync",{method:"put",params:e});if(!n.isSuccess)throw new Error(`failed to synchronize bookmarks: ${n}`);return n.data})}}){return Object(O.thunkAs)(pe.name,(t,n)=>ke(this,void 0,void 0,function*(){t({type:"SYNC_BOOKMARKS_START"});const o=e.getSearchCondition(n()),r=yield e.synchronize(o);t({type:"SYNC_BOOKMARKS_OK",bookmarks:r})}))}function fe(e={getSearchCondition:G,poll:function(e,t={search:Q}){return ke(this,void 0,void 0,function*(){for(let n=1;n<=10;n++){const o=yield t.search(e());if(o.syncStatus!==d.NotYet)return o;yield Oe(1e3*n)}return null})}}){return Object(O.thunkAs)(fe.name,(t,n)=>ke(this,void 0,void 0,function*(){t({type:"LOAD_MORE_BOOKMARKS_START"});const o=yield e.poll(()=>e.getSearchCondition(n()));if(null==o)throw new Error("could not synchronize with Pocket. Please try again later.");t({type:"LOAD_MORE_BOOKMARKS_OK",bookmarks:o.bookmarks,isLast:o.isLast,syncStatus:o.syncStatus})}))}const Oe=e=>ke(void 0,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,e))});function ye(e){return{type:"CATCH_ERR",caught:e}}var be=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};const ve=(e,t)=>{const n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.every(n=>e[n]==t[n])};function _e(e){return{type:"TOGGLE_SEARCH_PANEL_COLLAPSIBILITY",enabled:e}}const ge=e=>{const t=e.type;return Object(O.isThunkAction)(e)&&e.thunkType?`${t} (${e.thunkType})`:t};const Ae=(e,t=u)=>{const n=[({dispatch:e})=>{const t=t=>n=>{console.error(`[error in action ${ge(t)}]`,n),e(ye(n))};return e=>n=>{try{const o=e(n);null!=o&&Object(O.isThunkAction)(o)?o.promise.catch(t(n)):"err"in n&&t(n)(n.err)}catch(e){t(n)(e)}}},({dispatch:e,getState:t})=>n=>o=>{if(Object(O.isThunkAction)(o)||"UPDATE_SHOWN_BOOKMARKS"===o.type)return n(o);const r=t(),a=n(o),i=t(),s=G(r)!==G(i),c=Y(r)!==Y(i);return(s||c)&&e(me()),a},Object(O.createThunkMiddleware)(),Object(i.routerMiddleware)(e)];return t?[f.a,...n]:n};const Ee=Object(a.connect)(e=>({err:(({errors:e})=>e.err)(e)}))(class extends o.PureComponent{componentDidCatch(e){this.props.dispatch(ye(e))}render(){const{err:e}=this.props;return o.createElement(o.Fragment,null,e&&o.createElement("div",null,"ERROR: ",e.message),this.props.children)}});var Be=n(29),Re=n(28),Se=n.n(Re),we=n(27),je=n.n(we),Ke=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};const Ce=e=>{var{content:t}=e,n=Ke(e,["content"]);return o.createElement(Re.IconButtonBase,Object.assign({title:n.label},n),o.createElement(je.a,{icon:t,className:"iconButton_icon"}))},Te=e=>{var{content:t}=e,n=Ke(e,["content"]);return o.createElement(Se.a,Object.assign({title:n.label},n),o.createElement(je.a,{icon:t,className:"iconButton_icon"}))};var Ie=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};class Me extends o.PureComponent{constructor(){super(...arguments),this.state={}}componentDidMount(){setTimeout(()=>this.setState({src:this.props.src}))}render(){const{state:e}=this,t=this.props,{src:n}=t,r=Ie(t,["src"]);return null==e.src?null:o.createElement("img",Object.assign({src:e.src},r))}}const Le=n(70),Ne=()=>{};class Pe extends o.PureComponent{constructor(){super(...arguments),this.state={actionsOpen:!1},this.toggleActions=(()=>{this.setState({actionsOpen:!this.state.actionsOpen})})}render(){const{bookmark:e,onBookmarkOpen:t=Ne,onBackToUnread:n=Ne,onFavoriteToggle:r=Ne,onArchiveClick:a=Ne,onReaddClick:i=Ne,onDeleteClick:s=Ne}=this.props,{actionsOpen:c}=this.state,l=e.status===m.Archived;return o.createElement(o.Fragment,null,o.createElement("div",{className:Le.itemLinkContainer},o.createElement("a",{href:e.url,target:"_blank",rel:"nofollow noopener noreferrer",className:Le.itemLink,onClick:()=>t(e)},o.createElement("div",{className:Le.itemThumbnail},o.createElement(Me,{src:e.thumbnailUrl})),o.createElement("div",{className:Le.itemLinkText},o.createElement("span",{className:Le.itemTitle},e.title||e.url),o.createElement("span",{className:Le.itemDomain},new URL(e.url).hostname))),o.createElement("div",{className:Le.actionsOpener},o.createElement(Ce,{className:Le.actionOpenerButton,content:c?"expand_less":"expand_more",label:"",onClick:this.toggleActions}))),o.createElement("div",{className:`${Le.actions} ${c?Le.isOpen:""}`},e.status===m.Reading&&o.createElement(Ce,{className:Le.action,content:"undo",label:"Back to unread",onClick:()=>n(e)}),l&&o.createElement(Ce,{className:Le.action,content:"add",label:"Readd bookmark",onClick:()=>i(e)}),!l&&o.createElement(Ce,{className:Le.action,content:"done",label:"Archive bookmark",onClick:()=>a(e)}),o.createElement(Ce,{className:Le.action,content:"delete",label:"Delete bookmark",onClick:()=>confirm("delete permanently?")&&s(e)}),o.createElement(Ce,{className:`${Le.action} ${e.favorite?Le.isFavorite:""}`,content:"star",label:e.favorite?"Remove bookmark from favrites":"Add bookmark to favorites",onClick:()=>{r(e,!e.favorite)}})))}}var xe=n(52),De=n.n(xe);const Fe=e=>o.createElement(De.a,Object.assign({},e));var $e=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};const Ue=n(68);function He(e){var{bookmarks:t,onLoadMoreClick:n,className:r=""}=e,a=$e(e,["bookmarks","onLoadMoreClick","className"]);return o.createElement("div",{className:r},o.createElement(Be.TransitionGroup,{component:"ul",className:Ue.list},t.map(e=>o.createElement(Be.CSSTransition,{key:e.id,timeout:160,classNames:"g-BookmarkList-item"},o.createElement("li",Object.assign({className:Ue.listItem},u?{"data-id":e.id}:{}),o.createElement(Pe,Object.assign({bookmark:e},a)))))),n&&o.createElement("div",{className:Ue.loadMore},o.createElement(Fe,{outlined:!0,onClick:n},"more")))}var Qe=n(4),Ve=n(26),Ye=n.n(Ve),qe=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};const Ge=n(66),We=[{label:"New",filter:h.New},{label:"Reading",filter:h.Reading},{label:"Archived",filter:h.Archived,sortKey:y.ArchivedAt},{label:"All",filter:h.All}];function ze(e){var{condition:t}=e,n=qe(e,["condition"]);const r=!1!==n.collapsible?Ge.rootCollapsible:Ge.root;return o.createElement(o.Fragment,null,o.createElement("div",{className:Qe(r,n.className)},We.map(({label:e,filter:r,sortKey:a})=>o.createElement("div",{key:r},o.createElement(Ye.a,{label:e,wrapperClasses:Ge.filterField},o.createElement(Ve.NativeRadioControl,{id:`status-${r}`,name:"status",value:name,checked:r===t.statusFilter,onChange:(e=>()=>n.onConditionChange(e))({statusFilter:r,sortKey:a||y.AddedAt})}))))),o.createElement("div",{className:Ge.overlay,onClick:n.onOverlayClick}))}var Je=n(51),Xe=n.n(Je),Ze=n(50),et=n.n(Ze);const tt=n(64),nt=e=>o.createElement(et.a,{className:Qe(tt.root,e.className),indeterminate:e.nowLoading,bufferingDots:!1}),ot=n(62),rt=e=>o.createElement("div",null,o.createElement(Xe.a,{fixed:!0,className:ot.topAppBar,title:"Wracket",actionItems:[o.createElement(Te,{key:"refresh",content:"refresh",label:"Refresh bookmark list",onClick:e.onSyncClick}),o.createElement(Te,{key:"filter_list",content:"filter_list",label:"Open or close search panel",className:ot.searchPanelToggler,onClick:e.onToggleSearchPanelClick})]}),o.createElement(nt,{className:ot.progressBar,nowLoading:e.nowLoading}));var at=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};const it=Object(a.connect)(e=>({searchPanelCollapsible:z(e),nowLoading:e.bookmarks.nowLoading}))(e=>{var{dispatch:t}=e,n=at(e,["dispatch"]);return o.createElement(rt,{nowLoading:n.nowLoading,onSyncClick:()=>{t(pe())},onToggleSearchPanelClick:()=>{t(_e(!n.searchPanelCollapsible))}})}),st=n(60),ct=30;const lt=Object(a.connect)(e=>({urlQuery:e.router.location.search,bookmarks:V(e),nowLoading:e.bookmarks.nowLoading,syncStatus:e.user.syncStatus,canLoadMore:(e=>{const t=W(e);return null==t||!t.allFetched})(e),condition:G(e),searchPanelCollapsible:z(e)}))(class extends o.PureComponent{constructor(){super(...arguments),this.search=(e=>{this.props.dispatch(function(e){return Object(O.thunkAs)("search",(t,n)=>be(this,void 0,void 0,function*(){const o=Object.assign({},G(n()),e),r=b(o);t({type:"SEARCH",condition:o,query:r});const a=n().router.location.pathname;t(Object(i.push)(`${a}?${r}`))}))}(e))}),this.markBookmarkAsOpen=(e=>{e.status!==m.Archived&&this.props.dispatch(X(e.id))}),this.backBookmarkToUnread=(e=>{this.props.dispatch(Z(e.id))}),this.toggleFavorite=((e,t)=>{const n=t?ee(e.id):te(e.id);this.props.dispatch(n)}),this.archiveBookmark=(e=>{this.props.dispatch(ne(e.id))}),this.readdBookmark=(e=>{this.props.dispatch(oe(e.id))}),this.deleteBookmark=(e=>{this.props.dispatch(re(e.id))}),this.closeSearchPanel=(()=>{this.props.dispatch(_e(!0))}),this.loadMoreBookmarks=(e=>{this.props.dispatch(he({hasDesiredCount:e}))}),this.handleLoadMoreClick=(()=>this.loadMoreBookmarks(!1))}componentDidMount(){const{dispatch:e,syncStatus:t}=this.props;t===d.NotYet?e(fe()):e(de())}componentDidUpdate(e){const{urlQuery:t,bookmarks:n}=this.props;e.urlQuery!==t&&this.props.dispatch(function(e){return Object(O.thunkAs)("searchFromQuery",(t,n)=>be(this,void 0,void 0,function*(){const o=G(n()),r=v(e);if(!ve(r,o)){const e=b(r);t({type:"SEARCH",condition:r,query:e})}}))}(t)),e.bookmarks!==n&&this.loadMoreBookmarks(n.length>=ct)}render(){const{props:e}=this,{searchPanelCollapsible:t}=e,n=e.syncStatus!==d.Done||e.canLoadMore&&!e.nowLoading;return o.createElement("div",null,o.createElement(it,null),o.createElement("main",{className:st.mainContainer},o.createElement(He,{className:st.bookmarkList,bookmarks:e.bookmarks,onBookmarkOpen:this.markBookmarkAsOpen,onBackToUnread:this.backBookmarkToUnread,onFavoriteToggle:this.toggleFavorite,onArchiveClick:this.archiveBookmark,onReaddClick:this.readdBookmark,onDeleteClick:this.deleteBookmark,onLoadMoreClick:n?this.handleLoadMoreClick:void 0}),o.createElement(ze,{className:st.bookmarkFilter,collapsible:t,condition:e.condition,onConditionChange:this.search,onOverlayClick:this.closeSearchPanel})))}});n(23);const ut=document.getElementById("initial-data");if(null==ut)throw new Error("initial data script not found");const{user:dt,bookmarks:mt}=JSON.parse(ut.innerText),ht=Object(s.a)(),kt=v(window.location.search),pt=(ft={history:ht,initialState:{user:dt,bookmarks:E(mt),search:B({cdtn:kt,queryState:{count:Object.keys(mt).length,allFetched:!1}})}},Object(k.d)(I(ft.history),ft.initialState||{},Object(k.a)(...Ae(ft.history))));var ft;u&&(window._store=pt),Object(r.render)(o.createElement(a.Provider,{store:pt},o.createElement(i.ConnectedRouter,{history:ht},o.createElement(l.a,null,o.createElement(Ee,null,o.createElement(c.a,{exact:!0,path:"/home",component:lt}))))),document.getElementById("root"))},60:function(e,t,n){e.exports={mainContainer:"HomePage_mainContainer__ikDH",bookmarkFilter:"HomePage_bookmarkFilter_2wqhd",bookmarkList:"HomePage_bookmarkList_PcC57"}},62:function(e,t,n){e.exports={topAppBar:"TopAppBar_topAppBar_1_XBN",searchPanelToggler:"TopAppBar_searchPanelToggler_1AyAc",progressBar:"TopAppBar_progressBar_2dndp"}},64:function(e,t,n){e.exports={root:"LinearProgress_root_UD4fU"}},66:function(e,t,n){e.exports={root:"BookmarkFilter_root_IoA__",rootCollapsible:"BookmarkFilter_rootCollapsible_XLkFh BookmarkFilter_root_IoA__",filterField:"BookmarkFilter_filterField_1LYp4",overlay:"BookmarkFilter_overlay_1kmc2"}},68:function(e,t,n){e.exports={list:"BookmarkList_list_2FIn8 mdc-list mdc-list--two-line",listItem:"BookmarkList_listItem_2jiG0 mdc-list-item",loadMore:"BookmarkList_loadMore_E6u5u"}},70:function(e,t,n){e.exports={"mdc-ripple-surface--test-edge-var-bug":"BookmarkItem_mdc-ripple-surface--test-edge-var-bug_3KI80",itemThumbnail:"BookmarkItem_itemThumbnail_3WDOT",itemLinkContainer:"BookmarkItem_itemLinkContainer_40Cjj",itemLink:"BookmarkItem_itemLink_2NjY8",itemLinkText:"BookmarkItem_itemLinkText_15sMo mdc-list-item__text",itemTitle:"BookmarkItem_itemTitle_1tzKx",itemDomain:"BookmarkItem_itemDomain_pgYcp mdc-list-item__secondary-text",actions:"BookmarkItem_actions_1ftRJ",isOpen:"BookmarkItem_isOpen_3LjkE",action:"BookmarkItem_action_3_dm4",isFavorite:"BookmarkItem_isFavorite_-Is-b",actionsOpener:"BookmarkItem_actionsOpener_2AuHE",actionOpenerButton:"BookmarkItem_actionOpenerButton_ZL6mU","mdc-ripple-fg-radius-in":"BookmarkItem_mdc-ripple-fg-radius-in_1fxNU","mdc-ripple-fg-opacity-in":"BookmarkItem_mdc-ripple-fg-opacity-in_3-vsb","mdc-ripple-fg-opacity-out":"BookmarkItem_mdc-ripple-fg-opacity-out_2BQ6N"}}});